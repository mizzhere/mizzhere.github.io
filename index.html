<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<link rel="icon" href="/favicon.ico" type="image/x-icon">
<link rel="icon" href="/favicon-32x32.png" type="image/png" sizes="32x32">
<link rel="icon" href="/favicon-16x16.png" type="image/png" sizes="16x16">

<!-- Dành cho các thiết bị Apple (iPhone, iPad) -->
<link rel="apple-touch-icon" href="/apple-touch-icon.png">

<!-- Nếu bạn tạo các kích thước khác -->
<link rel="icon" href="/android-chrome-192x192.png" sizes="192x192">
<link rel="icon" href="/android-chrome-512x512.png" sizes="512x512">

    <meta property="og:title" content="The Genius - 1 trong 3">
    <meta property="og:description" content="Hãy chơi thử trước! Bản test trò chơi của TheGeniusMizzver.">
    <meta property="og:site_name" content="TheGeniusMizzver.">
    <title>The Genius(Mizzver.)</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Symbols+Outlined" rel="stylesheet">
</head>
<body>
    <div id="game-container">
        <header>
            <h1>The Genius – Tử Chiến: 1 Trong 3</h1>
        </header>

        <!-- START: MÀN HÌNH CÀI ĐẶT (SETTINGS SCREEN) -->
        <div id="settings-screen">
            <h2>Chào mừng bạn đến với Tử Chiến!</h2>
            <p>Tùy chỉnh luật chơi và thử thách trí tuệ của bạn.</p>

            <div class="settings-options">
                <!-- Nhóm Cài đặt Thời gian -->
                <div class="setting-group">
                    <h3 class="setting-group-title">
                        <span class="material-symbols-outlined">timer</span>
                        Cài Đặt Thời Gian
                    </h3>
                    <div class="setting-item">
                        <label for="memo-time-select">Thời gian ghi nhớ ban đầu:</label>
                        <select id="memo-time-select" class="setting-select">
                            <option value="60">60 giây</option>
                            <option value="55">55 giây</option>
                            <option value="50">50 giây</option>
                            <option value="45">45 giây</option>
                            <option value="40">40 giây</option>
                            <option value="35">35 giây</option>
                            <option value="30">30 giây</option>
                            <option value="25">25 giây</option>
                            <option value="20">20 giây</option>
                            <option value="15">15 giây</option>
                            <option value="10" selected>10 giây (Mặc định)</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label for="result-time-select">Thời gian hiện kết quả/tổng:</label>
                        <select id="result-time-select" class="setting-select">
                            <option value="3">3 giây</option>
                            <option value="5" selected>5 giây (Mặc định)</option>
                            <option value="10">10 giây</option>
                            <option value="15">15 giây</option>
                            <option value="20">20 giây</option>
                            <option value="30">30 giây</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label for="answer-time-select">Thời gian trả lời câu hỏi:</label>
                        <select id="answer-time-select" class="setting-select">
                            <option value="0" selected>Vô hạn (Mặc định)</option>
                            <option value="45">45 giây</option>
                            <option value="30">30 giây</option>
                            <option value="15">15 giây</option>
                            <option value="10">10 giây</option>
                            <option value="5">5 giây</option>
                        </select>
                    </div>
                </div>

                <!-- Nhóm Cài đặt Cấu trúc Game -->
                <div class="setting-group">
                    <h3 class="setting-group-title">
                        <span class="material-symbols-outlined">tune</span>
                        Cấu Trúc Game
                    </h3>
                    <div class="setting-item">
                        <label for="total-rounds-select">Tổng số vòng chơi:</label>
                        <select id="total-rounds-select" class="setting-select">
                            <option value="3">3 vòng</option>
                            <option value="4">4 vòng</option>
                            <option value="5" selected>5 vòng (Mặc định)</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label for="start-questions-select">Số câu hỏi vòng 1:</label>
                        <select id="start-questions-select" class="setting-select">
                            <option value="3" selected>3 câu (Mặc định)</option>
                            <option value="4">4 câu</option>
                            <option value="5">5 câu</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- START: HIỂN THỊ ĐIỂM RANK ƯỚC TÍNH -->
            <div id="estimated-rank-score-display" class="estimated-score-container">
                <p class="estimated-score-label">
                    <span class="material-symbols-outlined">military_tech</span>
                    Hệ số điểm ước tính (Thắng tuyệt đối):
                </p>
                <p class="estimated-score-value">
                    <span id="base-score-estimation">100</span> x 
                    <span id="total-multiplier-estimation">1.00</span> = 
                    <strong id="final-rank-estimation">100</strong>
                </p>
                <p class="estimated-score-note">(Giả định bạn thắng tất cả các câu hỏi và đối thủ 0 điểm)</p>
            </div>
            <!-- END: HIỂN THỊ ĐIỂM RANK ƯỚC TÍNH -->


            <button id="start-game-btn" class="button-primary">
                <span class="material-symbols-outlined">play_circle</span>
                Bắt Đầu Chơi
            </button>

            <div id="history-controls">
                <button id="view-history-btn" class="button-secondary">
                    <span class="material-symbols-outlined">history</span>
                    Xem Lịch Sử Chơi
                </button>
            </div>
        </div>
        <!-- END: MÀN HÌNH CÀI ĐẶT (SETTINGS SCREEN) -->

        <!-- START: MÀN HÌNH CHƠI GAME (GAME SCREEN) -->
        <div id="game-screen" class="hidden">
            <div id="game-info">
                <!-- Khối 1: Thông tin Vòng và Câu -->
                <div class="info-block round-info">
                    <div class="info-item">
                        <span class="material-symbols-outlined game-info-icon">cached</span>
                        Vòng: <span id="current-round">1</span>/<span id="total-rounds-display-ingame">5</span>
                    </div>
                    <div class="info-item">
                        <span class="material-symbols-outlined game-info-icon">help_center</span>
                        Câu: <span id="current-question-in-round">0</span>/<span id="total-questions-in-round">0</span>
                    </div>
                </div>

                <!-- Khối 2: Tỉ số nổi bật -->
                <div class="info-block score-display-prominent">
                    <div class="player-score-area">
                        <span class="player-label">BẠN</span>
                        <span class="score-value" id="player-score">0</span>
                    </div>
                    <div class="score-separator-prominent">:</div>
                    <div class="opponent-score-area">
                        <span class="opponent-label">ĐỐI THỦ</span>
                        <span class="score-value" id="opponent-score">0</span>
                    </div>
                </div>
                
                <div class="info-block win-info" id="win-condition-info">
                    <span class="material-symbols-outlined game-info-icon">military_tech</span>
                    <span id="game-status-text">Duy trì tập trung!</span>
                </div>

                <div class="info-block game-controls-grid">
                    <button id="ingame-restart-btn" title="Chơi Lại">
                        <span class="material-symbols-outlined">replay</span>
                    </button>
                    <button id="ingame-home-btn" title="Về Home">
                        <span class="material-symbols-outlined">home</span>
                    </button>
                </div>
            </div>

            <div id="fixed-number-display-area">
                <p class="info-label" id="number-context-label">Số ban đầu (Ghi nhớ):</p>
                <div class="number-grid">
                    <div class="column"><div class="column-header">A</div><div class="column-value" id="live-a">?</div></div>
                    <div class="column"><div class="column-header">B</div><div class="column-value" id="live-b">?</div></div>
                    <div class="column"><div class="column-header">C</div><div class="column-value" id="live-c">?</div></div>
                </div>
            </div>

            <div id="phase-content-area">
                <!-- Các phase-container (memorization, question, result, inter-round) -->
                <!-- ... (Nội dung các phase giữ nguyên như trước) ... -->
                 <div id="memorization-phase" class="phase-container hidden">
                    <h2>GHI NHỚ (Vòng <span id="memorization-round-number"></span>)</h2>
                    <div class="main-content-wrapper">
                        <div id="memorization-timer" class="timer-display">
                            <p class="timer-text">Ghi nhớ trong: <span id="memo-countdown">10</span>s</p>
                            <div class="progress-bar-container">
                                <div class="progress-bar" id="memo-progress-bar"></div>
                            </div>
                        </div>
                        <button id="proceed-to-questions-btn" class="button-primary hidden">
                            <span class="material-symbols-outlined">arrow_forward</span>
                            Bắt Đầu Câu Hỏi
                        </button>
                    </div>
                </div>

                <div id="question-phase" class="phase-container hidden">
                    <h2>VÒNG <span id="question-round-number"></span> - CÂU HỎI <span id="question-number-in-round-display"></span></h2>
                    <div class="main-content-wrapper">
                        <p id="question-text" class="question-emphasis">Câu hỏi...</p>
                        <div id="answer-buttons" class="answer-options">
                            <button class="answer-btn" data-answer="A">Cột A</button>
                            <button class="answer-btn" data-answer="B">Cột B</button>
                            <button class="answer-btn" data-answer="C">Cột C</button>
                            <button class="answer-btn answer-btn-neutral" data-answer="Không có">Không có</button>
                        </div>
                        <div id="answer-timer" class="timer-display hidden">
                            <p class="timer-text">Trả lời trong: <span id="ans-countdown">3</span>s</p>
                            <div class="progress-bar-container">
                                <div class="progress-bar" id="ans-progress-bar"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="result-phase" class="phase-container hidden">
                    <h2 id="result-message"></h2>
                    <p class="info-label">Tổng lũy kế hiển thị ở vùng số cố định.</p>
                    <div class="number-grid cumulative-sums-display hidden">
                        <div class="column"><div class="column-header">A</div><div class="column-value" id="cumulative-a-display"></div></div>
                        <div class="column"><div class="column-header">B</div><div class="column-value" id="cumulative-b-display"></div></div>
                        <div class="column"><div class="column-header">C</div><div class="column-value" id="cumulative-c-display"></div></div>
                    </div>
                    <div id="next-action-timer" class="timer-display">
                        <p class="timer-text">Tiếp theo sau: <span id="next-action-countdown">5</span>s</p>
                        <div class="progress-bar-container">
                            <div class="progress-bar" id="next-action-progress-bar"></div>
                        </div>
                    </div>
                </div>

                <div id="inter-round-phase" class="phase-container hidden">
                    <h2 id="inter-round-message">Chuẩn bị cho vòng tiếp theo!</h2>
                    <div class="main-content-wrapper">
                        <p id="inter-round-info"></p>
                        <button id="proceed-to-next-round-btn" class="button-primary">
                            <span class="material-symbols-outlined">skip_next</span>
                            Bắt Đầu Vòng Mới
                        </button>
                    </div>
                </div>
            </div> <!-- END: phase-content-area -->

            <div id="game-over-screen" class="phase-container hidden">
                <h2 id="final-result-message"></h2>
                <div class="final-scores">
                    <p>Điểm của bạn: <strong id="final-player-score"></strong></p>
                    <p>"Đối Thủ": <strong id="final-opponent-score"></strong></p>
                </div>
                <button id="restart-game-btn" class="button-primary">
                    <span class="material-symbols-outlined">refresh</span>
                    Chơi Lại
                </button>
            </div>
        </div>
        <!-- END: MÀN HÌNH CHƠI GAME (GAME SCREEN) -->

        <div id="rules-display">
            <button id="toggle-rules-btn" class="button-secondary">
                <span class="material-symbols-outlined">menu_book</span>
                Hiện/Ẩn Luật Chơi
            </button>
            <div id="rules-content" class="hidden">
                <pre>
LUẬT CHƠI: THE GENIUS – TRẬN TỬ CHIẾN: 1 TRONG 3
(Nội dung luật chơi giữ nguyên)
                </pre>
            </div>
        </div>

        <div id="history-popup" class="popup hidden">
            <div class="popup-content">
                <span class="close-popup-btn" id="close-history-popup-btn">×</span>
                <h2>Lịch Sử Chơi</h2>
                <div id="history-list-container">
                    <p>Chưa có lịch sử nào.</p>
                </div>
                <button id="clear-history-btn" class="button-danger">Xóa Lịch Sử</button>
            </div>
        </div>

    </div> <!-- END: game-container -->
    <script src="script.js"></script>
</body>
</html>
